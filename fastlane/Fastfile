default_platform(:ios)

platform :ios do
  desc "Build and distribute to Firebase"
  lane :distribute do
    match(
      type: "adhoc", 
      readonly: true,
      keychain_name: "github_actions.keychain",
      keychain_password: ENV["MATCH_KEYCHAIN_PASSWORD"]
    )
    
    build_app(
      workspace: "FlashEnglish.xcworkspace",
      scheme: "FlashEnglish",
      clean: true,
      export_method: "ad-hoc",
    )

    firebase_app_distribution(
      app: "1:353282465583:ios:7879b5701a6426a9d1cbda",
      testers: "masa4y44@gmail.com",
      release_notes: "New build from GitHub Actions"
    )
  end
end