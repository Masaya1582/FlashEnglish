default_platform(:ios)

platform :ios do
  desc "Submit a new Beta Build to Firebase App Distribution"
  lane :beta do
    # podのインストール
    cocoapods
    
    # IPAファイルの生成
    build_app(
      workspace: "FlashEnglish.xcworkspace", # あなたのプロジェクト名に置き換えてください
      scheme: "FlashEnglish", # あなたのXcodeスキーム名に置き換えてください
      export_method: "ad-hoc" # 配布方法に応じて設定
    )
    
    # Firebase App Distributionにアップロード
    firebase_app_distribution(
      app: ENV["FIREBASE_APP_ID"], # Firebaseで取得したApp ID
      firebase_cli_token: ENV["FIREBASE_TOKEN"], # Firebase CLI Token
      groups: "testers" # テストグループの名前
    )
  end
end